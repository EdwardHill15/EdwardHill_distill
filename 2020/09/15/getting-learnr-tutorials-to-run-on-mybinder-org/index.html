<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.35" />
  <meta name="author" content="Ted Laderas">

  
  
  
  
    
      
    
  
  <meta name="description" content="The learnr package is a wonderful way to package your tutorials. Anyone can download a learnr package of tutorials, and use learnr::run_tutorial() to run them on their own personal system.
Since learnr is based on shiny, these tutorials can also be published to a Shiny server such as shinyapps.io. However, one drawback to this is that the more popular the tutorial, the more access time you may be on the hook for, which can rapidly become expensive.">

  
  <link rel="alternate" hreflang="en-us" href="/2020/09/15/getting-learnr-tutorials-to-run-on-mybinder-org/">

  


  

  
  
  <meta name="theme-color" content="#4caf50">
  
  
  
  
    
  
  
    
    
      
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
      
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  

  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-111883274-1', 'auto');
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Ted Laderas, PhD">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="Ted Laderas, PhD">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/2020/09/15/getting-learnr-tutorials-to-run-on-mybinder-org/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@tladeras">
  <meta property="twitter:creator" content="@tladeras">
  
  <meta property="og:site_name" content="Ted Laderas, PhD">
  <meta property="og:url" content="/2020/09/15/getting-learnr-tutorials-to-run-on-mybinder-org/">
  <meta property="og:title" content="Getting LearnR tutorials to run on mybinder.org | Ted Laderas, PhD">
  <meta property="og:description" content="The learnr package is a wonderful way to package your tutorials. Anyone can download a learnr package of tutorials, and use learnr::run_tutorial() to run them on their own personal system.
Since learnr is based on shiny, these tutorials can also be published to a Shiny server such as shinyapps.io. However, one drawback to this is that the more popular the tutorial, the more access time you may be on the hook for, which can rapidly become expensive.">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2020-09-15T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2020-09-15T00:00:00&#43;00:00">
  

  

  <title>Getting LearnR tutorials to run on mybinder.org | Ted Laderas, PhD</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Ted Laderas, PhD</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#teaching">
            
            <span>Teaching</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Shiny</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#software">
            
            <span>Software</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#publications">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Blog</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
            
          
        

        <li class="nav-item">
          <a href="https://laderast.github.io/cv/" target="_blank" rel="noopener">
            
            <span>CV</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <div class="article-inner">
      <h1 itemprop="name">Getting LearnR tutorials to run on mybinder.org</h1>

      

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2020-09-15 00:00:00 &#43;0000 UTC" itemprop="datePublished dateModified">
      Sep 15, 2020
    </time>
  </span>
  <span itemscope itemprop="author publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Ted Laderas">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    6 min read
  </span>
  

  
  

  
  
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Getting%20LearnR%20tutorials%20to%20run%20on%20mybinder.org&amp;url=%2f2020%2f09%2f15%2fgetting-learnr-tutorials-to-run-on-mybinder-org%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2f2020%2f09%2f15%2fgetting-learnr-tutorials-to-run-on-mybinder-org%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f2020%2f09%2f15%2fgetting-learnr-tutorials-to-run-on-mybinder-org%2f&amp;title=Getting%20LearnR%20tutorials%20to%20run%20on%20mybinder.org"
         target="_blank" rel="noopener">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2f2020%2f09%2f15%2fgetting-learnr-tutorials-to-run-on-mybinder-org%2f&amp;title=Getting%20LearnR%20tutorials%20to%20run%20on%20mybinder.org"
         target="_blank" rel="noopener">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Getting%20LearnR%20tutorials%20to%20run%20on%20mybinder.org&amp;body=%2f2020%2f09%2f15%2fgetting-learnr-tutorials-to-run-on-mybinder-org%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>


      <div class="article-style" itemprop="articleBody">
        

<p>The <code>learnr</code> package is a wonderful way to package your tutorials. Anyone can download a <code>learnr</code> package of tutorials, and use <code>learnr::run_tutorial()</code> to run them on their own personal system.</p>

<p>Since <code>learnr</code> is based on <code>shiny</code>, these tutorials can also be published to a <code>Shiny</code> server such as <code>shinyapps.io</code>. However, one drawback to this is that the more popular the tutorial, the more access time you may be on the hook for, which can rapidly become expensive.</p>

<p>Enter mybinder.org, which is a way of running reproducible analyses and tutorials. In short, you give a mybinder.org server some information about the software environment needed to run your code, and you can run code based on your repo. Mybinder.org servers are a little limited, (1 Gb RAM), but this is more than capable of running most <code>learnr</code> tutorials.</p>

<p>Recently, they added Shiny as a deployable format, which means you can run shiny apps, including <code>learnr</code> tutorial packages off their servers.</p>

<p>I&rsquo;m starting a <code>learnr</code> tutorial package called <a href="https://github.com/laderas/tidyowl" target="_blank"><code>tidyowl</code></a> and I decided to share what I&rsquo;ve learned.</p>

<h2 id="what-s-the-problem">What&rsquo;s the problem?</h2>

<p>However, there are some differences between the file structure of a <code>learnr</code> package and the expected file structure of a shiny-ready mybinder.org repository.</p>

<p>Can we get both setups to work at the same time? Yes, we can.</p>

<h2 id="why-would-we-want-to-run-learnr-tutorials-off-mybinder-org">Why would we want to run learnr tutorials off mybinder.org?</h2>

<p>The short answer is making your material accessible to as many people as possible. <code>learnr</code> tutorials can be run from a phone or tablet, and running your tutorial for a lot of people doesn&rsquo;t cost you any bandwidth or usage costs, as you&rsquo;re using the same infrastructure that mybinder.org provides.</p>

<h2 id="quick-review-of-learnr-package-structure">Quick Review of <code>learnr</code> package structure</h2>

<p>For a package, <code>learnr</code> tutorials are stored in the following folder:</p>

<p><code>inst/tutorials/TUTORIAL_NAME</code></p>

<p>So, if you had a tutorial named <code>learning_shiny</code> it would live in</p>

<p><code>inst/tutorials/learning_shiny/</code></p>

<p>and the <code>.Rmd</code> file containing the tutorial should be named <code>learning_shiny.Rmd</code> as well.</p>

<p>The problem I encountered is that mybinder.org expects your tutorial to exist as a folder in the root of the repo. In other words, it needs to see</p>

<p><code>learning_shiny/</code> in the root of the repository to run.</p>

<p>We can fix this by adding a file called <code>postBuild</code> that gives instructions to run after the software environment is built. We&rsquo;ll use it to copy the tutorials into the root folder.</p>

<h2 id="making-your-tutorial-mybinder-org-ready">Making your tutorial mybinder.org ready</h2>

<p>In short, you&rsquo;ll need 3 files to make your <code>learnr</code> tutorial mybinder.org ready: a <code>runtime.txt</code>, a <code>install.R</code>, and a <code>postBuild</code> file in order to make your <code>learnr</code> package compatible with mybinder.org. Let&rsquo;s go through the steps:</p>

<ol>
<li>Specify a <code>runtime.txt</code> file in your root folder. You&rsquo;ll need a file called <code>runtime.txt</code> that contains a single line:</li>
</ol>

<pre><code>r-3.6-2020-08-01
</code></pre>

<p>This gives mybinder.org the signal that the Docker image needs to have R installed. You can see that I specified a version (3.6) and a snapshot date (2020-08-01). These should be a valid version and date for the snapshot - check the MRAN pages for more info: <a href="https://mran.microsoft.com/" target="_blank">https://mran.microsoft.com/</a></p>

<p><em>Note: When R 4.0 and greater is available in MRAN, you should move to it. It includes RStudio Package Manager, which installs the binary images rather than installing from source code which speeds up building the Docker images by quite a bit.</em></p>

<p><em>Another Note: I tried to get this to work with a <code>Dockerfile</code> using the <code>rocker/binder</code> images, but I couldn&rsquo;t get this image to work. If anyone has gotten this working, I&rsquo;d appreciate you sharing how you did it.</em></p>

<ol>
<li>Specify package dependencies using <code>install.R</code> in your root folder - in this file, you&rsquo;ll need to specify all the packages your tutorial is dependent on using <code>install.packages()</code> commands. Here&rsquo;s the contents of my <code>install.R</code> file:</li>
</ol>

<pre><code>install.packages(&quot;learnr&quot;)
install.packages(&quot;here&quot;)
install.packages(&quot;tidyverse&quot;)
</code></pre>

<ol>
<li>Specify moving the tutorials in <code>inst/tutorials/</code> to the repository root folder using the <code>postBuild</code> folder. These commands are run after the container is built and will make the tutorials accessible via Binder.</li>
</ol>

<p>For example, for the <code>tidyowl</code> package, I have these <code>mv</code> commands in my <code>postBuild</code>:</p>

<pre><code>mv inst/tutorials/learning_tidyselect/ .
mv inst/tutorials/learning_rowwise/ .
</code></pre>

<p>You&rsquo;ll need a <code>mv</code> line for each tutorial that your package contains.</p>

<h3 id="note-using-holepunch">Note: Using <code>holepunch</code></h3>

<p>I believe you can also use <code>holepunch</code> to make setup a little easier. <a href="https://github.com/karthik/holepunch" target="_blank">https://github.com/karthik/holepunch</a> I haven&rsquo;t tried it yet.</p>

<h2 id="build-the-docker-image-for-your-tutorial">Build the Docker Image for your tutorial</h2>

<p>Okay, almost there! Now we&rsquo;re going to go to <code>mybinder.org</code> to build your Docker image. This is the software environment that your tutorial will run off of. This image will have shiny-server and RStudio installed on it automatically, which makes debugging your package easier.</p>

<p>When you&rsquo;re ready, go to <a href="https://mybinder.org" target="_blank">https://mybinder.org</a> and put in the public location of your repository. Then click the &ldquo;Launch&rdquo; button.</p>

<p>Now your container will build. Note that this will take a little while (10+ minutes), especially if you need to install something like <code>tidyverse</code>.</p>

<p><img src="/img/2020-learnr/binder_repo.jpg"></p>

<p>When it&rsquo;s done building, you&rsquo;ll be at a Jupyter page. Click &ldquo;New &gt;&gt; RStudio&rdquo; to open up your image with RStudio.</p>

<p><img src="/img/2020-learnr/binder_open_rstudio.jpg"></p>

<p>You should see that your tutorial folders have been moved to the root folders. This is good confirmation that the <code>mv</code> statements of <code>postBuild</code> work. I personally like to have individual <code>data/</code> folders in each tutorial, as it makes making them a little easier to deploy.</p>

<p>Test out running the tutorial by going to the .Rmd file and running it.</p>

<p><img src="/img/2020-learnr/binder_rstudio.jpg"></p>

<p>If you&rsquo;ve setup everything right, you should see your <code>learnr</code> tutorial popup. I will say that this is usually the fine tuning step that takes the longest.</p>

<p><em>Note: there is a GitHub action (<a href="https://github.com/jupyterhub/repo2docker-action" target="_blank">https://github.com/jupyterhub/repo2docker-action</a>) to rebuild your Docker image on new commits. I&rsquo;ll be looking into this in the future.</em></p>

<h2 id="specify-the-url-for-running-your-tutorial">Specify the URL for running your tutorial.</h2>

<p>Each tutorial in your package will need its own URL to run.</p>

<p>You&rsquo;ll add the following to your mybinder.org link:</p>

<pre><code>urlpath=shiny/learning_tidyselect/
</code></pre>

<p>The <code>urlpath</code> is a signal to mybinder that it will need to run shiny, and you&rsquo;ll put the name of your tutorial folder instead of <code>learning_tidyselect</code>. Note the trailing slash after <code>learning_tidyselect</code>.</p>

<p>So, my final URL for the <code>learning_tidyselect</code> tutorial is this (click it and try it out):</p>

<p><a href="https://mybinder.org/v2/gh/laderast/tidyowl/master?urlpath=shiny/learning_tidyselect/" target="_blank">https://mybinder.org/v2/gh/laderast/tidyowl/master?urlpath=shiny/learning_tidyselect/</a></p>

<p>You can now send this link out and nearly anyone in the world can run your <code>learnr</code> tutorial without installing R and not using up precious Shinyapps.io CPU time!</p>

<h2 id="caveats">Caveats</h2>

<p>Shiny apps may suddenly disconnect - have students reload the page if that happens.</p>

<p>Images get deleted off the mybinder.org servers within a week, so it is worth automating your container build to do so every week so that your students don&rsquo;t have to wait for your container image to rebuild.</p>

<p>Also, progress is not saved, because the final url is different each time you run it off mybinder.org servers.</p>

<h2 id="acknowledgements">Acknowledgements</h2>

<p>Thanks so much to the <code>mybinder.org</code> team, what they do is beyond awesome.</p>

<p>Thanks to Sang Yun Oh, whose repository helped me figure more of these details out. <a href="https://github.com/syoh/learnr-tutorial" target="_blank">https://github.com/syoh/learnr-tutorial</a></p>

      </div>

      




    </div>
  </div>

</article>






<div class="article-container">
  

</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2018 &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/R.min.js"></script>
      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML" integrity="sha512-tOav5w1OjvsSJzePRtt2uQPFwBoHt1VZcUq8l8nm5284LEKE9FSJBQryzMBzHxY5P0zRdNqEcpLIRVYFNgu1jw==" crossorigin="anonymous"></script>
    
    

  </body>
</html>

